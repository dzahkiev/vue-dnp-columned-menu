(function(e){function t(t){for(var i,o,r=t[0],d=t[1],c=t[2],u=0,m=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(l,o)&&l[o]&&m.push(l[o][0]),l[o]=0;for(i in d)Object.prototype.hasOwnProperty.call(d,i)&&(e[i]=d[i]);s&&s(t);while(m.length)m.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,r=1;r<n.length;r++){var d=n[r];0!==l[d]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},l={app:0},a=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/vue-dnp-columned-menu/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],d=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var s=d;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("sortable-columned-menu",{attrs:{"field-name":"test",columns:e.columns}})},a=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card-scene"},[n("Container",{attrs:{orientation:"horizontal","drag-handle-selector":".column-drag-handle","drop-placeholder":e.upperDropPlaceholderOptions},on:{drop:function(t){return e.onColumnDrop(t)},"drag-start":e.dragStart}},e._l(e.scene.children,(function(t){return n("Draggable",{key:t.id},[n("div",{staticClass:"card-container"},[n("div",{staticClass:"card-column-header"},[n("span",{staticClass:"column-drag-handle"},[e._v("☰")]),e._v(" "+e._s(t.name)+" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}],staticClass:"add-new-btn",attrs:{size:"sm",variant:"success"},on:{click:function(n){return e.setCurrent(t.id)}}},[n("b-icon-plus")],1)],1),n("Container",{attrs:{"group-name":"col","get-child-payload":e.getCardPayload(t.id),"drag-class":"card-ghost","drop-class":"card-ghost-drop","drop-placeholder":e.dropPlaceholderOptions},on:{drop:function(n){return e.onCardDrop(t.id,n)}}},e._l(t.children,(function(i){return n("Draggable",{key:i.id},[n("div",{staticClass:"card",staticStyle:{background:"#fff"}},[n("p",{staticStyle:{float:"left"}},[n("span",{class:{"label-type":"label"===i.type}},[e._v(e._s(i.ru.title))]),n("span",[n("b-icon-trash-fill",{staticStyle:{float:"right",cursor:"pointer"},attrs:{variant:"danger",title:"Удалить"},on:{click:function(n){return e.deleteItem(t.id,i.id)}}}),n("b-icon-pencil-fill",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}],staticStyle:{float:"right",cursor:"pointer"},attrs:{variant:"primary",title:"Редактировать"},on:{click:function(n){return e.setCurrent(t.id,i)}}})],1)])])])})),1)],1)])})),1),n("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing",title:"Редактирование пункта меню",size:"lg"},on:{show:e.resetModal,hidden:e.resetModal,ok:e.handleOk}},[n("form",{ref:"form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[n("b-form-group",{attrs:{label:"Вид пункта меню"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ariaDescribedby;return[n("b-form-radio-group",{attrs:{id:"radio-group-2","aria-describedby":i,name:"radio-sub-component"},model:{value:e.modal.selected,callback:function(t){e.$set(e.modal,"selected",t)},expression:"modal.selected"}},[n("b-form-radio",{attrs:{name:"some-radios",value:"label"},model:{value:e.modal.selected,callback:function(t){e.$set(e.modal,"selected",t)},expression:"modal.selected"}},[e._v(" простой заголовок ")]),n("b-form-radio",{attrs:{name:"some-radios",value:"link"},model:{value:e.modal.selected,callback:function(t){e.$set(e.modal,"selected",t)},expression:"modal.selected"}},[e._v(" ссылка ")])],1)]}}])}),n("div",[n("b-tabs",{staticStyle:{"margin-top":"-40px"},attrs:{"content-class":"mt-3",align:"right"}},e._l(e.languages,(function(t){return n("b-tab",{key:t.code,attrs:{title:t.title,active:t.active}},[n("b-form-checkbox",{attrs:{switch:""},model:{value:e.modal[t.code].isActive,callback:function(n){e.$set(e.modal[t.code],"isActive",n)},expression:"modal[language.code].isActive"}},[e._v(" Активность ")]),n("br"),n("b-form-group",{attrs:{label:"Заголовок","invalid-feedback":"Это поле обязательно для заполнения",state:e.modal[t.code].titleState}},[n("b-form-input",{attrs:{state:e.modal[t.code].titleState},on:{input:function(n){return e.changeActivity(t.code)}},model:{value:e.modal[t.code].title,callback:function(n){e.$set(e.modal[t.code],"title",n)},expression:"modal[language.code].title"}})],1),n("b-form-group",{attrs:{label:"Ссылка","label-for":"link-input${language.code}","invalid-feedback":"Это поле обязательно для заполнения",state:e.modal[t.code].linkState}},[n("b-form-input",{attrs:{state:e.modal[t.code].linkState,disabled:"link"!==e.modal.selected},on:{input:function(n){return e.changeActivity(t.code)}},model:{value:e.modal[t.code].link,callback:function(n){e.$set(e.modal[t.code],"link",n)},expression:"modal[language.code].link"}})],1)],1)})),1)],1)],1)]),n("div",[n("b-form-textarea",{attrs:{id:"textarea",name:e.fieldName,hidden:"",value:JSON.stringify(e.scene.children,void 0,2),rows:"3","max-rows":"25"}}),n("div",{staticClass:"json-preview"},[e._m(0),n("div",[e._v(" "+e._s(JSON.stringify(e.scene.children,void 0,2))+" ")])])],1)],1)},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("b",[e._v("JSON preview:")])])}],d=n("2909"),c=n("5530"),s=(n("4de4"),n("a434"),n("c740"),n("9911"),n("99af"),n("159b"),n("3f7d")),u=[{code:"ru",title:"Русский",active:!0},{code:"en",title:"English",active:!1}],m={columnId:null,itemId:null,selected:"link",ru:{isActive:!0,title:"",link:"",titleState:null,linkState:null},en:{isActive:!1,title:"",link:"",titleState:null,linkState:null}},f={components:{Container:s["a"],Draggable:s["b"]},name:"SortableColumnedMenu",props:{fieldName:{type:String,required:!0},columns:{type:Array,default:function(){for(var e=[],t=1;t<=4;t++)e.push({id:t,name:"Колонка #".concat(t),children:[]});return e}}},data:function(){return{languages:u,scene:{children:this.columns},upperDropPlaceholderOptions:{className:"cards-drop-preview",animationDuration:"150",showOnTop:!0},dropPlaceholderOptions:{className:"drop-preview",animationDuration:"150",showOnTop:!0},modalDefaultState:m,modal:Object(c["a"])({},m)}},methods:{onColumnDrop:function(e){var t=Object.assign({},this.scene);t.children=this.applyDrag(t.children,e),this.scene=t},onCardDrop:function(e,t){if(null!==t.removedIndex||null!==t.addedIndex){var n=Object.assign({},this.scene),i=n.children.filter((function(t){return t.id===e}))[0],l=n.children.indexOf(i),a=Object.assign({},i);a.children=this.applyDrag(a.children,t),n.children.splice(l,1,a),this.scene=n}},getCardPayload:function(e){var t=this;return function(n){return t.scene.children.filter((function(t){return t.id===e}))[0].children[n]}},applyDrag:function(e,t){var n=t.removedIndex,i=t.addedIndex,l=t.payload;if(null===n&&null===i)return e;var a=Object(d["a"])(e),o=l;return null!==n&&(o=a.splice(n,1)[0]),null!==i&&a.splice(i,0,o),a},dragStart:function(){console.log("drag started")},deleteItem:function(e,t){var n=this.scene.children.filter((function(t){return t.id===e}))[0];n.children.splice(n.children.findIndex((function(e){return e.id===t})),1)},updateItem:function(e,t){var n=this.scene.children.filter((function(t){return t.id===e}))[0],i=n.children.filter((function(e){return e.id===t}))[0];i.type=this.modal.selected;var l=this;u.forEach((function(e){i[e.code].link="link"===l.modal.selected?l.modal[e.code].link:"",i[e.code].title=l.modal[e.code].title,i[e.code].isActive=l.modal[e.code].isActive}))},addItem:function(e){var t=this.scene.children.filter((function(t){return t.id===e}))[0],n="link"===this.modal.selected;t.children.push({id:"".concat(e,".").concat(t.children.length+1),type:this.modal.selected,ru:{title:this.modal.ru.title,link:n?this.modal.ru.link:"",isActive:this.modal.ru.isActive},en:{title:this.modal.en.title,link:n?this.modal.en.link:"",isActive:this.modal.en.isActive}})},checkFormValidity:function(){var e=!0,t=this;return this.languages.forEach((function(n){!0===t.modal[n.code].isActive&&(e=e&&(t.modal[n.code].titleState=""!==t.modal[n.code].title),e=e&&(t.modal[n.code].linkState="link"!==t.modal.selected||""!==t.modal[n.code].link))})),e},resetModal:function(){Object.assign(this.modal.ru,{titleState:null,linkState:null}),Object.assign(this.modal.en,{titleState:null,linkState:null})},handleOk:function(e){e.preventDefault(),this.handleSubmit()},handleSubmit:function(){var e=this;this.checkFormValidity()&&(this.modal.itemId?this.updateItem(this.modal.columnId,this.modal.itemId):this.addItem(this.modal.columnId),this.$nextTick((function(){e.$bvModal.hide("modal-prevent-closing")})))},setCurrent:function(e,t){Object.assign(this.modal,this.modalDefaultState),this.modal.columnId=e,this.modal.itemId=null,this.modal.ru=Object(c["a"])(Object(c["a"])({},this.modal.ru),{title:"",link:""}),this.modal.en=Object(c["a"])(Object(c["a"])({},this.modal.en),{title:"",link:""}),t&&(this.modal=Object.assign(this.modal,{itemId:t.id,selected:t.type,ru:Object(c["a"])({},t.ru),en:Object(c["a"])({},t.en)}))},changeActivity:function(e){this.modal[e].isActive=!0}}},p=f,h=(n("abfc"),n("2877")),v=Object(h["a"])(p,o,r,!1,null,null,null),b=v.exports,g=[{id:1,name:"Колонка #1",children:[{id:1,type:"label",ru:{title:"Заголовок",link:"",isActive:!0},en:{title:"Label",link:"",isActive:!0}},{id:2,type:"link",ru:{title:"Ссылка меню",link:"http://",isActive:!0},en:{title:"Link",link:"http://",isActive:!0}}]},{id:2,name:"Колонка #2",children:[{id:2.1,type:"label",ru:{title:"Заголовок",link:"",isActive:!0},en:{title:"Label",link:"",isActive:!0}},{id:2.2,type:"link",ru:{title:"Ссылка меню",link:"http://",isActive:!0},en:{title:"Menu 2",link:"http://",isActive:!0}}]},{id:3,name:"Колонка #3",children:[]},{id:4,name:"Колонка #4",children:[]}],k={components:{SortableColumnedMenu:b},data:function(){return{columns:g}}},y=k,O=Object(h["a"])(y,l,a,!1,null,null,null),S=O.exports,_=n("5f5b"),j=n("b1e0");n("f9e3"),n("2dd8");i["default"].use(_["a"]),i["default"].use(j["a"]),new i["default"]({render:function(e){return e(S)}}).$mount("#app")},"913a":function(e,t,n){},abfc:function(e,t,n){"use strict";n("913a")}});
//# sourceMappingURL=app.5c6a187a.js.map